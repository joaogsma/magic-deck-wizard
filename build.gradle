import org.ajoberstar.grgit.Grgit

plugins {
  id 'scala'
  id 'java'
  id 'org.ajoberstar.grgit' version '1.7.2'
  id 'org.ajoberstar.release-opinion' version '1.7.2'
  id 'com.github.johnrengelman.shadow' version '2.0.4'
}

ext {
  scalaVersion = '2.12'
}

repositories {
  mavenLocal()
  mavenCentral()
  jcenter()
}

release {
  grgit = Grgit.open(currentDir: file('.'))
}

dependencies {
  compile 'org.scala-lang:scala-library:2.12.4'
  testCompile "org.scalatest:scalatest_$scalaVersion:3.0.0"
}

shadowJar {
  version = project.version

  manifest {
    attributes 'Main-Class': 'DeckWizard'
  }
}

tasks.release.dependsOn build, shadowJar
